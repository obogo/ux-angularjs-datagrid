<!DOCTYPE html>
<html>
<head>
  <title>ux-datagrid-focusManager.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../", thisFile = "Users/wes/PhpstormProjects/wes/webux/ux-datagrid//addons/desktop/ux-datagrid-focusManager.js", defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h2">
        <a href="#ux.visibility">ux.visibility</a>
      </div>
      <div class="heading h3">
        <a href="#isvisible">isVisible</a>
      </div>
      <div class="heading h3">
        <a href="#getstyle">getStyle</a>
      </div>
      <div class="heading h3">
        <a href="#elementindocument">elementInDocument</a>
      </div>
      <div class="heading h2">
        <a href="#getcleanselector">getCleanSelector</a>
      </div>
      <div class="heading h2">
        <a href="#quickselector">quickSelector</a>
      </div>
      <div class="heading h2">
        <a href="#gridfocusmanager">gridFocusManager</a>
      </div>
      <div class="heading h3">
        <a href="#wrap">wrap</a>
      </div>
      <div class="heading h3">
        <a href="#addlisteners">addListeners</a>
      </div>
      <div class="heading h3">
        <a href="#removelisteners">removeListeners</a>
      </div>
      <div class="heading h3">
        <a href="#applytolisteners">applyToListeners</a>
      </div>
      <div class="heading h3">
        <a href="#getfocusableelements">getFocusableElements</a>
      </div>
      <div class="heading h3">
        <a href="#filtervisible">filterVisible</a>
      </div>
      <div class="heading h3">
        <a href="#getrowelmfromchildelm">getRowElmFromChildElm</a>
      </div>
      <div class="heading h3">
        <a href="#query">query</a>
      </div>
      <div class="heading h3">
        <a href="#filterselection">filterSelection</a>
      </div>
      <div class="heading h3">
        <a href="#filtereq">filterEq</a>
      </div>
      <div class="heading h3">
        <a href="#isngclass">isNgClass</a>
      </div>
      <div class="heading h3">
        <a href="#filterclasses">filterClasses</a>
      </div>
      <div class="heading h3">
        <a href="#addlistenerstorow">addListenersToRow</a>
      </div>
      <div class="heading h3">
        <a href="#removelistenerstorow">removeListenersToRow</a>
      </div>
      <div class="heading h3">
        <a href="#onkeydown">onKeyDown</a>
      </div>
      <div class="heading h3">
        <a href="#focustoprevrowelement">focusToPrevRowElement</a>
      </div>
      <div class="heading h3">
        <a href="#focustonextrowelement">focusToNextRowElement</a>
      </div>
      <div class="heading h3">
        <a href="#issame">isSame</a>
      </div>
      <div class="heading h3">
        <a href="#hasprevrowfocuselement">hasPrevRowFocusElement</a>
      </div>
      <div class="heading h3">
        <a href="#hasnextrowfocuselement">hasNextRowFocusElement</a>
      </div>
      <div class="heading h3">
        <a href="#getprevrowfocuselement">getPrevRowFocusElement</a>
      </div>
      <div class="heading h3">
        <a href="#getnextrowfocuselement">getNextRowFocusElement</a>
      </div>
      <div class="heading h3">
        <a href="#focustorowelement">focusToRowElement</a>
      </div>
      <div class="heading h3">
        <a href="#getselector">getSelector</a>
      </div>
      <div class="heading h3">
        <a href="#performfocus">performFocus</a>
      </div>
      <div class="heading h3">
        <a href="#findnextrowwithselection">findNextRowWithSelection</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs">
          <h1>ux-datagrid-focusManager.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>!
ux-angularjs-datagrid v.1.4.7
(c) 2016, Obogo
<a href='https://github.com/obogo/ux-angularjs-datagrid'>https://github.com/obogo/ux-angularjs-datagrid</a>
License: MIT.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">global</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">define</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">define</span><span class="p">.</span><span class="nx">amd</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">define</span><span class="p">(</span><span class="nx">exports</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">module</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nx">global</span><span class="p">.</span><span class="nx">ux</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*global exports */</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="ux.visibility">
  <h2>
    <a href="#ux.visibility" name="ux.visibility" class="pilcrow">&#182;</a>
    <a name="visibility">ux.visibility</a>
  </h2>
</div>


<p>Determines simplistic element visibility.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">exports</span><span class="p">.</span><span class="nx">visibility</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="isvisible">
  <h3>
    <a href="#isvisible" name="isvisible" class="pilcrow">&#182;</a>
    <a name="isVisible">isVisible</a>
  </h3>
</div>


<p>Checks if a DOM element is visible. Takes into consideration its parents.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">el</span>
      <span class="dox_type">DOMElement</span>
      <span>the DOMElement to check if is visible</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">when</span>
      <span class="dox_type">maxParent</span>
      <span>max parent is reached it will stop.</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">if</span>
      <span class="dox_type">allowOpacity=</span>
      <span>true then opacity will not return a false if it is 0.</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">function</span> <span class="nx">isVisible</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">maxParent</span><span class="p">,</span> <span class="nx">allowOpacity</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">el</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">elementInDocument</span><span class="p">(</span><span class="nx">el</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="mi">9</span> <span class="o">===</span> <span class="nx">p</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4">&#182;</a>
</div>
<p>Return true for document node</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5">&#182;</a>
</div>
<p>Return false if our element is invisible</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">allowOpacity</span> <span class="o">&amp;&amp;</span> <span class="nx">getStyle</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="s2">&quot;opacity&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;0&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;none&quot;</span> <span class="o">===</span> <span class="nx">getStyle</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="s2">&quot;hidden&quot;</span> <span class="o">===</span> <span class="nx">getStyle</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="s2">&quot;visibility&quot;</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">p</span> <span class="o">&amp;&amp;</span> <span class="nx">p</span> <span class="o">!==</span> <span class="nx">maxParent</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6">&#182;</a>
</div>
<p>-- If we have a parent, let's continue:
-- Let's recursively check upwards:</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">return</span> <span class="nx">isVisible</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">maxParent</span><span class="p">,</span> <span class="nx">allowOpacity</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="getstyle">
  <h3>
    <a href="#getstyle" name="getstyle" class="pilcrow">&#182;</a>
    <a name="getStyle">getStyle</a>
  </h3>
</div>


<p>Cross browser method to get style properties.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">el</span>
      <span class="dox_type">DOMElement</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">property</span>
      <span class="dox_type">String</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">function</span> <span class="nx">getStyle</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">property</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nb">document</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="kc">null</span><span class="p">)[</span><span class="nx">property</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">el</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">[</span><span class="nx">property</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="elementindocument">
  <h3>
    <a href="#elementindocument" name="elementindocument" class="pilcrow">&#182;</a>
    <a name="elementInDocument">elementInDocument</a>
  </h3>
</div>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">element</span>
      <span class="dox_type">DOMElement</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">function</span> <span class="nx">elementInDocument</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">element</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">element</span> <span class="o">==</span> <span class="nb">document</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="nx">getStyle</span><span class="o">:</span> <span class="nx">getStyle</span><span class="p">,</span>
        <span class="nx">isVisible</span><span class="o">:</span> <span class="nx">isVisible</span>
    <span class="p">};</span>
<span class="p">}();</span>

<span class="cm">/*global exports */</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">selector</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9">&#182;</a>
</div>
<p>TODO: Needs unit tests. This needs jquery to run unit tests for selections since it uses filters.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">omitAttrs</span><span class="p">,</span> <span class="nx">uniqueAttrs</span><span class="p">,</span> <span class="nx">classFilters</span><span class="p">,</span> <span class="nx">classFiltersFctn</span><span class="p">,</span> <span class="nx">api</span><span class="p">,</span> <span class="nx">ngRx</span> <span class="o">=</span> <span class="sr">/^ng-\w+/</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">query</span><span class="p">(</span><span class="nx">selectorStr</span><span class="p">,</span> <span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">el</span> <span class="o">=</span> <span class="nx">el</span> <span class="o">||</span> <span class="nx">api</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">rx</span> <span class="o">=</span> <span class="sr">/:eq\((\d+)\)$/</span><span class="p">,</span> <span class="nx">match</span> <span class="o">=</span> <span class="nx">selectorStr</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">rx</span><span class="p">),</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">count</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10">&#182;</a>
</div>
<p>filter out eq.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span><span class="nx">match</span> <span class="o">&amp;&amp;</span> <span class="nx">match</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">selectorStr</span> <span class="o">=</span> <span class="nx">selectorStr</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rx</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
            <span class="nx">count</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="nx">result</span> <span class="o">=</span> <span class="nx">el</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">selectorStr</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">result</span> <span class="o">&amp;&amp;</span> <span class="nx">count</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">result</span><span class="p">[</span><span class="nx">count</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
    <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="getcleanselector">
  <h2>
    <a href="#getcleanselector" name="getcleanselector" class="pilcrow">&#182;</a>
    getCleanSelector
  </h2>
</div>


<p>Generate a clean readable selector. This is accurate, but NOT performant.
The reason this one takes longer is because it takes many queries as it goes to determine when it has
built a query that is unique enough trying to do this as early on as possible to keep it short.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">el</span>
      <span class="dox_type">DOMElement</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">ignoreClasses</span>
      <span class="dox_type">Array</span>
      <span><ul>
<li>an array of strings or regExp</li>
</ul></span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">function</span> <span class="nx">getCleanSelector</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">ignoreClass</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">validateEl</span><span class="p">(</span><span class="nx">el</span><span class="p">))</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">ignore</span> <span class="o">=</span> <span class="nx">buildIgnoreFunction</span><span class="p">(</span><span class="nx">ignoreClass</span><span class="p">),</span> <span class="nx">matches</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">str</span><span class="p">,</span> <span class="nx">maxParent</span> <span class="o">=</span> <span class="nx">api</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span> <span class="nx">selector</span> <span class="o">=</span> <span class="nx">getSelectorData</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">maxParent</span><span class="p">,</span> <span class="nx">ignore</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">count</span> <span class="o">&gt;</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">totalCount</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">selector</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">selector</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">parent</span> <span class="o">||</span> <span class="nx">selector</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12">&#182;</a>
</div>
<p>once we find the top level. we need to move up one.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">str</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">str</span> <span class="o">||</span> <span class="nx">selectorToString</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">child</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">child</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">str</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">child</span><span class="p">.</span><span class="nx">str</span><span class="p">;</span>
                    <span class="nx">child</span> <span class="o">=</span> <span class="nx">child</span><span class="p">.</span><span class="nx">child</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">count</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">child</span> <span class="o">&amp;&amp;</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">child</span><span class="p">.</span><span class="nx">count</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">matches</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">array</span><span class="p">.</span><span class="nx">toArray</span><span class="p">(</span><span class="nx">query</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="nx">maxParent</span><span class="p">));</span>
                <span class="nx">index</span> <span class="o">=</span> <span class="nx">matches</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
                <span class="nx">str</span> <span class="o">+=</span> <span class="s2">&quot;:eq(&quot;</span> <span class="o">+</span> <span class="nx">index</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">str</span> <span class="o">+=</span> <span class="nx">getVisible</span><span class="p">();</span>
            <span class="k">return</span> <span class="nx">str</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="quickselector">
  <h2>
    <a href="#quickselector" name="quickselector" class="pilcrow">&#182;</a>
    <a name="quickSelector">quickSelector</a>
  </h2>
</div>


<p>build the string selector for the element. This is more performant, but hardly readable.
It is faster because it doesn't check to determine how unique it is. It just keeps building until
it gets to the maxParent.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">element</span>
      <span class="dox_type">DomElement</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">maxParent</span>
      <span class="dox_type">DomElement=</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">ignoreClass</span>
      <span class="dox_type">Function=</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">function</span> <span class="nx">quickSelector</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">maxParent</span><span class="p">,</span> <span class="nx">ignoreClass</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">validateEl</span><span class="p">(</span><span class="nx">element</span><span class="p">))</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">ignore</span> <span class="o">=</span> <span class="nx">buildIgnoreFunction</span><span class="p">(</span><span class="nx">ignoreClass</span><span class="p">),</span> <span class="nx">selector</span> <span class="o">=</span> <span class="nx">getSelectorData</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">maxParent</span><span class="p">,</span> <span class="nx">ignore</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">selectorToString</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="o">+</span> <span class="nx">getVisible</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">validateEl</span><span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14">&#182;</a>
</div>
<p>we do not want jquery elements here. only HTMLElements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span><span class="nx">el</span> <span class="o">&amp;&amp;</span> <span class="nx">el</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">el</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">throwError</span><span class="p">(</span><span class="s2">&quot;selector can only build a selection to a single DOMElement. A list was passed.&quot;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">getVisible</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">api</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">addVisible</span> <span class="o">?</span> <span class="s2">&quot;:visible&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">matchesClass</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">matcher</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">matcher</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">matcher</span> <span class="o">===</span> <span class="nx">item</span> <span class="o">||</span> <span class="nx">ngRx</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">item</span><span class="p">)))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">matcher</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">matcher</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">getSelectorData</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">maxParent</span><span class="p">,</span> <span class="nx">ignoreClass</span><span class="p">,</span> <span class="nx">child</span><span class="p">,</span> <span class="nx">smartSelector</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">result</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">maxParent</span> <span class="o">=</span> <span class="nx">maxParent</span> <span class="o">||</span> <span class="nx">api</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span>
        <span class="nx">result</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">element</span><span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
            <span class="nx">ignoreClass</span><span class="o">:</span> <span class="nx">ignoreClass</span><span class="p">,</span>
            <span class="nx">maxParent</span><span class="o">:</span> <span class="nx">maxParent</span><span class="p">,</span>
            <span class="nx">classes</span><span class="o">:</span> <span class="nx">getClasses</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">ignoreClass</span><span class="p">),</span>
            <span class="nx">attributes</span><span class="o">:</span> <span class="nx">getAttributes</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">child</span><span class="p">),</span>
            <span class="nx">type</span><span class="o">:</span> <span class="nx">element</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">&amp;&amp;</span> <span class="nx">element</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="nx">child</span><span class="o">:</span> <span class="nx">child</span>
        <span class="p">};</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">result</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">$unique</span> <span class="o">||</span> <span class="nx">child</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">smartSelector</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">str</span> <span class="o">=</span> <span class="nx">selectorToString</span><span class="p">(</span><span class="nx">result</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">count</span> <span class="o">=</span> <span class="nx">maxParent</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">str</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">getParentSelector</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">maxParent</span><span class="p">,</span> <span class="nx">ignoreClass</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">smartSelector</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15">&#182;</a>
</div>
<p>dumb selector. keeps building it. Not checking to see if it is unique.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="nx">result</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">getParentSelector</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">maxParent</span><span class="p">,</span> <span class="nx">ignoreClass</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">smartSelector</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">filterNumbers</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">typeof</span> <span class="nx">item</span> <span class="o">!==</span> <span class="s2">&quot;number&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">buildIgnoreFunction</span><span class="p">(</span><span class="nx">ignoreClasses</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">ignoreClasses</span> <span class="o">=</span> <span class="nx">ignoreClasses</span> <span class="o">||</span> <span class="p">[];</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">ignoreClasses</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">ignoreClasses</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cls</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">ignoreClasses</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">iLen</span> <span class="o">=</span> <span class="nx">ignoreClasses</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">iLen</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">matchesClass</span><span class="p">(</span><span class="nx">cls</span><span class="p">,</span> <span class="nx">ignoreClasses</span><span class="p">[</span><span class="nx">i</span><span class="p">]))</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">matchesClass</span><span class="p">(</span><span class="nx">cls</span><span class="p">,</span> <span class="nx">ignoreClasses</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">};</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">getClasses</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">ignoreClass</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">classes</span> <span class="o">=</span> <span class="nx">ux</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">classList</span><span class="p">,</span> <span class="nx">filterNumbers</span><span class="p">);</span>
        <span class="nx">classes</span> <span class="o">=</span> <span class="nx">ux</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">classes</span><span class="p">,</span> <span class="nx">classFiltersFctn</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">ux</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">classes</span><span class="p">,</span> <span class="nx">ignoreClass</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">getAttributes</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">child</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">attributes</span> <span class="o">?</span> <span class="nx">element</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">length</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">attributes</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">uniqueAttr</span> <span class="o">=</span> <span class="nx">getUniqueAttribute</span><span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">attributes</span><span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16">&#182;</a>
</div>
<p>first see if it has a unique attribute.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span><span class="nx">uniqueAttr</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">uniqueAttr</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;id&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">api</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">allowId</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">attributes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="nx">uniqueAttr</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">uniqueAttr</span><span class="p">.</span><span class="nx">name</span> <span class="o">!==</span> <span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">attributes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">createAttrStr</span><span class="p">(</span><span class="nx">uniqueAttr</span><span class="p">));</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">attributes</span><span class="p">.</span><span class="nx">$unique</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="k">return</span> <span class="nx">attributes</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">api</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">allowAttributes</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">attr</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">attributes</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">omitAttrs</span><span class="p">[</span><span class="nx">attr</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">uniqueAttrs</span><span class="p">[</span><span class="nx">attr</span><span class="p">.</span><span class="nx">name</span><span class="p">])</span> <span class="p">{</span>
                    <span class="nx">attributes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">createAttrStr</span><span class="p">(</span><span class="nx">attr</span><span class="p">));</span>
                <span class="p">}</span>
                <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">attributes</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">createAttrStr</span><span class="p">(</span><span class="nx">attr</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot;[&quot;</span> <span class="o">+</span> <span class="nx">camelCase</span><span class="p">(</span><span class="nx">attr</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;=&#39;&quot;</span> <span class="o">+</span> <span class="nx">escapeQuotes</span><span class="p">(</span><span class="nx">attr</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&#39;]&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">getUniqueAttribute</span><span class="p">(</span><span class="nx">attributes</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">attributes</span> <span class="o">?</span> <span class="nx">attributes</span><span class="p">.</span><span class="nx">length</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">name</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">attr</span> <span class="o">=</span> <span class="nx">attributes</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="nx">name</span> <span class="o">=</span> <span class="nx">camelCase</span><span class="p">(</span><span class="nx">attr</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">uniqueAttrs</span><span class="p">[</span><span class="nx">name</span><span class="p">])</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">attr</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">camelCase</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">ary</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">len</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">name</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">ary</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">);</span>
            <span class="nx">len</span> <span class="o">=</span> <span class="nx">ary</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">ary</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">ary</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">ary</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">substr</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
                <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">name</span> <span class="o">=</span> <span class="nx">ary</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">name</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">escapeQuotes</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">str</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&quot;/g</span><span class="p">,</span> <span class="s2">&quot;&amp;quot;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&#39;/g</span><span class="p">,</span> <span class="s2">&quot;&amp;apos;&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">selectorToString</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">depth</span><span class="p">,</span> <span class="nx">overrideMaxParent</span><span class="p">,</span> <span class="nx">skipCount</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">matches</span><span class="p">,</span> <span class="nx">str</span><span class="p">,</span> <span class="nx">parent</span><span class="p">;</span>
        <span class="nx">depth</span> <span class="o">=</span> <span class="nx">depth</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">str</span> <span class="o">=</span> <span class="nx">selector</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">selector</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">$unique</span> <span class="o">?</span> <span class="nx">selectorToString</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">str</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="s2">&quot; &quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">getSelectorString</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">depth</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">skipCount</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">parent</span> <span class="o">=</span> <span class="nx">overrideMaxParent</span> <span class="o">||</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">maxParent</span><span class="p">;</span>
            <span class="nx">matches</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">querySelectorAll</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="o">||</span> <span class="p">[];</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">matches</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">str</span> <span class="o">+=</span> <span class="s2">&quot;:eq(&quot;</span> <span class="o">+</span> <span class="nx">getIndexOfTarget</span><span class="p">(</span><span class="nx">matches</span><span class="p">,</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">element</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">str</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">getSelectorString</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">$unique</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">attributes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">type</span> <span class="o">+</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">classes</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">classes</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">getParentSelector</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">maxParent</span><span class="p">,</span> <span class="nx">ignoreClass</span><span class="p">,</span> <span class="nx">child</span><span class="p">,</span> <span class="nx">detailed</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span> <span class="o">!==</span> <span class="nx">maxParent</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">getSelectorData</span><span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span> <span class="nx">maxParent</span><span class="p">,</span> <span class="nx">ignoreClass</span><span class="p">,</span> <span class="nx">child</span><span class="p">,</span> <span class="nx">detailed</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">getIndexOfTarget</span><span class="p">(</span><span class="nx">list</span><span class="p">,</span> <span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">iLen</span> <span class="o">=</span> <span class="nx">list</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">iLen</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">element</span> <span class="o">===</span> <span class="nx">list</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">i</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">getList</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">ary</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">i</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">exports</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">,</span> <span class="nx">obj</span><span class="p">,</span> <span class="p">[</span> <span class="nx">i</span> <span class="p">]))</span> <span class="p">{</span>
                <span class="nx">ary</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">obj</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">ary</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">api</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">config</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">doc</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nb">document</span><span class="p">,</span>
            <span class="nx">allowId</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nx">allowAttributes</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nx">addVisible</span><span class="o">:</span> <span class="kc">false</span>
        <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17">&#182;</a>
</div>
<p>OMIT</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">addOmitAttrs</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">exports</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">omitAttrs</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">});</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">removeOmitAttrs</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">exports</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">delete</span> <span class="nx">omitAttrs</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">getOmitAttrs</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">getList</span><span class="p">(</span><span class="nx">omitAttrs</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">resetOmitAttrs</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">omitAttrs</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;class&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nx">style</span><span class="o">:</span> <span class="kc">true</span>
            <span class="p">};</span>
        <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18">&#182;</a>
</div>
<p>UNIQUE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">addUniqueAttrs</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">exports</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">uniqueAttrs</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">});</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">removeUniqueAttrs</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">exports</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">delete</span> <span class="nx">uniqueAttrs</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">getUniqueAttrs</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">getList</span><span class="p">(</span><span class="nx">uniqueAttrs</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">resetUniqueAttrs</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">uniqueAttrs</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">id</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nx">uid</span><span class="o">:</span> <span class="kc">true</span>
            <span class="p">};</span>
        <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19">&#182;</a>
</div>
<p>CLASS OMIT OMIT FILTERS</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">addClassOmitFilters</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">exports</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">filter</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">classFilters</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">filter</span><span class="p">);</span>
            <span class="p">});</span>
            <span class="nx">classFiltersFctn</span> <span class="o">=</span> <span class="nx">buildIgnoreFunction</span><span class="p">(</span><span class="nx">classFilters</span><span class="p">);</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">removeClassOmitFilters</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">exports</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">filter</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">classFilters</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">filter</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">classFilters</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">});</span>
            <span class="nx">classFiltersFctn</span> <span class="o">=</span> <span class="nx">buildIgnoreFunction</span><span class="p">(</span><span class="nx">classFilters</span><span class="p">);</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">getClassOmitFilters</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">classFilters</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">resetClassOmitFilters</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">classFilters</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="nx">classFiltersFctn</span> <span class="o">=</span> <span class="nx">buildIgnoreFunction</span><span class="p">(</span><span class="nx">classFilters</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">get</span><span class="o">:</span> <span class="nx">getCleanSelector</span><span class="p">,</span>
        <span class="nx">getCleanSelector</span><span class="o">:</span> <span class="nx">getCleanSelector</span><span class="p">,</span>
        <span class="nx">quickSelector</span><span class="o">:</span> <span class="nx">quickSelector</span><span class="p">,</span>
        <span class="nx">reset</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">api</span><span class="p">.</span><span class="nx">resetOmitAttrs</span><span class="p">();</span>
            <span class="nx">api</span><span class="p">.</span><span class="nx">resetUniqueAttrs</span><span class="p">();</span>
            <span class="nx">api</span><span class="p">.</span><span class="nx">resetClassOmitFilters</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="nx">api</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
    <span class="k">return</span> <span class="nx">api</span><span class="p">;</span>
<span class="p">}();</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">FOCUS_TO_PREV_ELEMENT_OF_SAME</span> <span class="o">=</span> <span class="s2">&quot;ux-datagrid:focusToPrevElementOfSame&quot;</span><span class="p">;</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">FOCUS_TO_NEXT_ELEMENT_OF_SAME</span> <span class="o">=</span> <span class="s2">&quot;ux-datagrid:focusToNextElementOfSame&quot;</span><span class="p">;</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">FOCUS_TO_PREV_ELEMENT_OF_SAME_FAILURE</span> <span class="o">=</span> <span class="s2">&quot;ux-datagrid:focusToPrevElementOfSameFailure&quot;</span><span class="p">;</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">FOCUS_TO_NEXT_ELEMENT_OF_SAME_FAILURE</span> <span class="o">=</span> <span class="s2">&quot;ux-datagrid:focusToNextElementOfSameFailure&quot;</span><span class="p">;</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">ON_SCROLL_TO_TOP_ENTER</span> <span class="o">=</span> <span class="s2">&quot;ux-datagrid:onScrollToTopEnter&quot;</span><span class="p">;</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">ON_SCROLL_TO_BOTTOM_ENTER</span> <span class="o">=</span> <span class="s2">&quot;ux-datagrid:onScrollToBottomEnter&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="gridfocusmanager">
  <h2>
    <a href="#gridfocusmanager" name="gridfocusmanager" class="pilcrow">&#182;</a>
    <a name="gridFocusManager">gridFocusManager</a>
  </h2>
</div>


<p>Handle focus for enterKey to move down the correct columns.</p>

<blockquote>
  <p><em><strong>Note:</strong> One of the most common mistakes when implementing this is to have classes that are applied on focus.
  Those get picked up in the selectors and then when it tries to find them in the next row they do not
  match because they are not focused or selected yet. You can easily get around this by applying <a href="#filterClasses">filterClasses</a>.
  <a href="#filterClasses">filterClasses</a> are defined in the options of the datagrid.</em>
  <code>data-options="{gridFocusManger: {filterClasses: ['focused','selected']}, filterNextPattern:{available:true}}"</code>
  The filterNextPattern is used to speed up the lookup to the next item in focus. So it can quickly find which item to
  scroll to before having to make sure the item is compiled and has a selector. It takes a pattern to match on.
  See <a href='https://github.com/obogo/hummingbird/blob/master/src/utils/validators/isMatch.js'>https://github.com/obogo/hummingbird/blob/master/src/utils/validators/isMatch.js</a> for options with this pattern.</p>
</blockquote>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">&quot;ux&quot;</span><span class="p">).</span><span class="nx">factory</span><span class="p">(</span><span class="s2">&quot;gridFocusManager&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span> <span class="s2">&quot;inst&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inst</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>We want to add and remove listeners only on the dom that is currently under watch.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">logWrapper</span><span class="p">(</span><span class="s2">&quot;gridFocusManager&quot;</span><span class="p">,</span> <span class="p">{},</span> <span class="s2">&quot;redOrange&quot;</span><span class="p">,</span> <span class="nx">inst</span><span class="p">),</span> <span class="nx">unwatchers</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">keys</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">ENTER</span><span class="o">:</span> <span class="mi">13</span><span class="p">,</span>
            <span class="nx">UP</span><span class="o">:</span> <span class="mi">38</span><span class="p">,</span>
            <span class="nx">DOWN</span><span class="o">:</span> <span class="mi">40</span>
        <span class="p">},</span> <span class="nx">throttleIntv</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="wrap">
  <h3>
    <a href="#wrap" name="wrap" class="pilcrow">&#182;</a>
    <a name="wrap">wrap</a>
  </h3>
</div>


<p>if an element is not a JQLite element then make it one.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">el</span>
      <span class="dox_type">JQLite</span>
      <span class="dox_type">HTMLElement</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">wrap</span><span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">el</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">el</span><span class="p">;</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="addlisteners">
  <h3>
    <a href="#addlisteners" name="addlisteners" class="pilcrow">&#182;</a>
    <a name="addListeners">addListeners</a>
  </h3>
</div>


<p>Add all of the listeners to the visible rows.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">addListeners</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">result</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;addListeners&quot;</span><span class="p">);</span>
            <span class="nx">applyToListeners</span><span class="p">(</span><span class="nx">addListenersToRow</span><span class="p">);</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="removelisteners">
  <h3>
    <a href="#removelisteners" name="removelisteners" class="pilcrow">&#182;</a>
    <a name="removeListeners">removeListeners</a>
  </h3>
</div>


<p>remove all of the listeners from min to max.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">removeListeners</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25">&#182;</a>
</div>
<p>this needs executed before the activeRange changes.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">result</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;removeListeners&quot;</span><span class="p">);</span>
            <span class="nx">applyToListeners</span><span class="p">(</span><span class="nx">removeListenersToRow</span><span class="p">);</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="applytolisteners">
  <h3>
    <a href="#applytolisteners" name="applytolisteners" class="pilcrow">&#182;</a>
    <a name="applyToListeners">applyToListeners</a>
  </h3>
</div>


<p>using the inst.activeRange.min/max apply methods to those rows.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">method
</span>
      <span class="dox_type">Function</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">applyToListeners</span><span class="p">(</span><span class="nx">method</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">values</span><span class="p">.</span><span class="nx">activeRange</span><span class="p">.</span><span class="nx">max</span><span class="p">)</span> <span class="o">||</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">values</span><span class="p">.</span><span class="nx">activeRange</span><span class="p">.</span><span class="nx">max</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">result</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;  applyTo: %s - %s&quot;</span><span class="p">,</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">values</span><span class="p">.</span><span class="nx">activeRange</span><span class="p">.</span><span class="nx">min</span><span class="p">,</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">values</span><span class="p">.</span><span class="nx">activeRange</span><span class="p">.</span><span class="nx">max</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">values</span><span class="p">.</span><span class="nx">activeRange</span><span class="p">.</span><span class="nx">min</span><span class="p">,</span> <span class="nx">row</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">values</span><span class="p">.</span><span class="nx">activeRange</span><span class="p">.</span><span class="nx">max</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">row</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">getRowElm</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
                <span class="nx">method</span><span class="p">(</span><span class="nx">row</span><span class="p">);</span>
                <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="getfocusableelements">
  <h3>
    <a href="#getfocusableelements" name="getfocusableelements" class="pilcrow">&#182;</a>
    <a name="getFocusableElements">getFocusableElements</a>
  </h3>
</div>


<p>Get all of the focusable elements within an element</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">el</span>
      <span class="dox_type">JQLite</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">getFocusableElements</span><span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">el</span> <span class="o">&amp;&amp;</span> <span class="nx">el</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28">&#182;</a>
</div>
<p>detachDom and memoryOptimizer can cause this to be null at times.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="kd">var</span> <span class="nx">focusable</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">el</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s2">&quot;input,a,select&quot;</span><span class="p">));</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29">&#182;</a>
</div>

<div class="highlight"><pre><code>       <span class="n">result</span><span class="p">.</span><span class="n">log</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">getFocusableElements %s&quot;</span><span class="p">,</span> <span class="n">focusable</span><span class="p">.</span><span class="n">length</span><span class="p">);</span>
</code></pre></div>


        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="k">return</span> <span class="nx">ux</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">focusable</span><span class="p">,</span> <span class="nx">filterVisible</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="p">[];</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="filtervisible">
  <h3>
    <a href="#filtervisible" name="filtervisible" class="pilcrow">&#182;</a>
    <a name="filterVisible">filterVisible</a>
  </h3>
</div>


<p>Filter the elements in the selection to only get those that are visible.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">el</span>
      <span class="dox_type">HTMLElement</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">filterVisible</span><span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31">&#182;</a>
</div>

<div class="highlight"><pre><code>       <span class="n">result</span><span class="p">.</span><span class="n">log</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\t\t</span><span class="s">isVisible %s&quot;</span><span class="p">,</span> <span class="n">ux</span><span class="p">.</span><span class="n">visibility</span><span class="p">.</span><span class="n">isVisible</span><span class="p">(</span><span class="n">el</span><span class="p">));</span>
</code></pre></div>


        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">return</span> <span class="nx">ux</span><span class="p">.</span><span class="nx">visibility</span><span class="p">.</span><span class="nx">isVisible</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">getContent</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="kc">true</span><span class="p">);</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="getrowelmfromchildelm">
  <h3>
    <a href="#getrowelmfromchildelm" name="getrowelmfromchildelm" class="pilcrow">&#182;</a>
    <a name="getRowElmFromChildElm">getRowElmFromChildElm</a>
  </h3>
</div>


<p>Move up the dom to determine the row of an element.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">el</span>
      <span class="dox_type">JQLite</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">getRowElmFromChildElm</span><span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33">&#182;</a>
</div>
<p>keep moving up until the parent is a chunk.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">el</span><span class="p">.</span><span class="nx">parent</span><span class="p">();</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">parent</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">chunkClass</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">el</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
                <span class="nx">parent</span> <span class="o">=</span> <span class="nx">el</span><span class="p">.</span><span class="nx">parent</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">el</span><span class="p">;</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="query">
  <h3>
    <a href="#query" name="query" class="pilcrow">&#182;</a>
    <a name="query">query</a>
  </h3>
</div>


<p>Similar to jquery find.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">el</span>
      <span class="dox_type">JQLite</span>
      <span class="dox_type">HTMLElement</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">selector</span>
      <span class="dox_type">String</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">query</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">filters</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">),</span> <span class="nx">sel</span> <span class="o">=</span> <span class="nx">filters</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">((</span><span class="nx">el</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nx">el</span><span class="p">).</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">sel</span><span class="p">));</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">filters</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">result</span> <span class="o">=</span> <span class="nx">filterSelection</span><span class="p">(</span><span class="nx">filters</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span> <span class="nx">result</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="filterselection">
  <h3>
    <a href="#filterselection" name="filterselection" class="pilcrow">&#182;</a>
    <a name="filterSelection">filterSelection</a>
  </h3>
</div>


<p>Apply filters to the selection array.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">filterStr</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">elements</span>
      <span class="dox_type">Array</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">filterSelection</span><span class="p">(</span><span class="nx">filterStr</span><span class="p">,</span> <span class="nx">elements</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">filterStr</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;eq(&quot;</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">filterEq</span><span class="p">(</span><span class="nx">filterStr</span><span class="p">,</span> <span class="nx">elements</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">filterStr</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;visible&quot;</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">ux</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">elements</span><span class="p">,</span> <span class="nx">filterVisible</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">elements</span><span class="p">;</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="filtereq">
  <h3>
    <a href="#filtereq" name="filtereq" class="pilcrow">&#182;</a>
    <a name="filterEq">filterEq</a>
  </h3>
</div>


<p>Filter for eq.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">filterStr</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">elements</span>
      <span class="dox_type">Array</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">filterEq</span><span class="p">(</span><span class="nx">filterStr</span><span class="p">,</span> <span class="nx">elements</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">filterStr</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\d+/</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
            <span class="k">return</span> <span class="nx">elements</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">elements</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[];</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="isngclass">
  <h3>
    <a href="#isngclass" name="isngclass" class="pilcrow">&#182;</a>
    <a name="isNgClass">isNgClass</a>
  </h3>
</div>


<p>Detect if is an ng-* class from the selectors.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">cls</span>
      <span class="dox_type">String</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">isNgClass</span><span class="p">(</span><span class="nx">cls</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!!</span><span class="p">(</span><span class="nx">cls</span> <span class="o">&amp;&amp;</span> <span class="nx">cls</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;ng-&quot;</span><span class="p">);</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="filterclasses">
  <h3>
    <a href="#filterclasses" name="filterclasses" class="pilcrow">&#182;</a>
    <a name="filterClasses">filterClasses</a>
  </h3>
</div>


<p>Filter out classes that are not supposed to be part of the selection.
By defining options.gridFocusManager.filterClasses as an array of class names to omit from the selection
you can filter these out from causing selections to not be made.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">cls</span>
      <span class="dox_type">String</span>
    </div>
  </div>
</div>


<div class="highlight"><pre><code> <span class="nt">&lt;div</span> <span class="na">ux-datagrid=</span><span class="s">&quot;items&quot;</span> <span class="na">addons=</span><span class="s">&quot;gridFocusManager&quot;</span> <span class="na">options=</span><span class="s">&quot;{gridFocusManager: {filterClasses: </span><span class="cp">[</span><span class="s1">&#39;focus&#39;</span><span class="p">,</span><span class="s1">&#39;selected&#39;</span><span class="p">,</span><span class="s1">&#39;highlight&#39;</span><span class="cp">]</span><span class="s">}}&quot;</span><span class="nt">&gt;</span>...<span class="nt">&lt;/div&gt;</span>
</code></pre></div>


        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">filterClasses</span><span class="p">(</span><span class="nx">cls</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">isToBeFiltered</span> <span class="o">=</span> <span class="nx">cls</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span> <span class="kc">true</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isToBeFiltered</span> <span class="o">&amp;&amp;</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">gridFocusManager</span> <span class="o">&amp;&amp;</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">gridFocusManager</span><span class="p">.</span><span class="nx">filterClasses</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">isToBeFiltered</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">gridFocusManager</span><span class="p">.</span><span class="nx">filterClasses</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">cls</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isToBeFiltered</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">isToBeFiltered</span> <span class="o">=</span> <span class="nx">isNgClass</span><span class="p">(</span><span class="nx">cls</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="o">!</span><span class="nx">isToBeFiltered</span><span class="p">;</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="addlistenerstorow">
  <h3>
    <a href="#addlistenerstorow" name="addlistenerstorow" class="pilcrow">&#182;</a>
    <a name="addListenersToRow">addListenersToRow</a>
  </h3>
</div>


<p>Apply event listeners to the row.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">rowElm
</span>
      <span class="dox_type">JQLite</span>
      <span class="dox_type">HTMLElement</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">addListenersToRow</span><span class="p">(</span><span class="nx">rowElm</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">focusable</span> <span class="o">=</span> <span class="nx">getFocusableElements</span><span class="p">(</span><span class="nx">angular</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="nx">rowElm</span><span class="p">));</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">focusable</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">focusable</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">matchAll</span><span class="p">(</span><span class="nx">focusable</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">nodeName</span><span class="o">:</span> <span class="s2">&quot;INPUT&quot;</span>
            <span class="p">})).</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40">&#182;</a>
</div>
<p>only add keydown to input fields</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="nx">result</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;    addListenersToRow&quot;</span><span class="p">);</span>
                <span class="nx">focusable</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="nx">focusable</span><span class="p">);</span>
                <span class="nx">focusable</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;keydown&quot;</span><span class="p">,</span> <span class="nx">onKeyDown</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;    no focusable elements found in row&quot;</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="removelistenerstorow">
  <h3>
    <a href="#removelistenerstorow" name="removelistenerstorow" class="pilcrow">&#182;</a>
    <a name="removeListenersToRow">removeListenersToRow</a>
  </h3>
</div>


<p>Remove event listeners from that row.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">rowElm
</span>
      <span class="dox_type">JQLite</span>
      <span class="dox_type">HTMLElement</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">removeListenersToRow</span><span class="p">(</span><span class="nx">rowElm</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">focusable</span> <span class="o">=</span> <span class="nx">getFocusableElements</span><span class="p">(</span><span class="nx">angular</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="nx">rowElm</span><span class="p">));</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">focusable</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">focusable</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">matchAll</span><span class="p">(</span><span class="nx">focusable</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">nodeName</span><span class="o">:</span> <span class="s2">&quot;INPUT&quot;</span>
            <span class="p">})).</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-42" id="section-42">&#182;</a>
</div>
<p>only add keydown to input fields</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="nx">result</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;    removeListenersToRow&quot;</span><span class="p">);</span>
                <span class="nx">focusable</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="nx">focusable</span><span class="p">);</span>
                <span class="nx">focusable</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">&quot;keydown&quot;</span><span class="p">,</span> <span class="nx">onKeyDown</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;    no focusable elements found in row&quot;</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="onkeydown">
  <h3>
    <a href="#onkeydown" name="onkeydown" class="pilcrow">&#182;</a>
    <a name="onKeyDown">onKeyDown</a>
  </h3>
</div>


<p>Handle Enter, up/down key events.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">event
</span>
      <span class="dox_type">Event</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">onKeyDown</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">),</span> <span class="nx">atTop</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">atBottom</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">index</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">item</span><span class="p">;</span>
            <span class="nx">result</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;FM: onKeyDown&quot;</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">ENTER</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/A/</span><span class="p">))</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44">&#182;</a>
</div>
<p>on anchors we allow enter to execute it. So ignore it.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">shiftKey</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">ENTER</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">UP</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">atTop</span> <span class="o">=</span> <span class="o">!</span><span class="nx">focusToPrevRowElement</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">atTop</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">index</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">getRowIndexFromElement</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
                    <span class="nx">item</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">getRowItem</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span>
                    <span class="nx">inst</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">ON_SCROLL_TO_TOP_ENTER</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">item</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">ENTER</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">DOWN</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">atBottom</span> <span class="o">=</span> <span class="o">!</span><span class="nx">focusToNextRowElement</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">atBottom</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">index</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">getRowIndexFromElement</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
                    <span class="nx">item</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">getRowItem</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span>
                    <span class="nx">inst</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">ON_SCROLL_TO_BOTTOM_ENTER</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">item</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="focustoprevrowelement">
  <h3>
    <a href="#focustoprevrowelement" name="focustoprevrowelement" class="pilcrow">&#182;</a>
    <a name="focusToPrevRowElement">focusToPrevRowElement</a>
  </h3>
</div>


<p>Focus to the previous row element from the current focused element.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">focusedEl
</span>
      <span class="dox_type">JQLite</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">focusToPrevRowElement</span><span class="p">(</span><span class="nx">focusedEl</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">focusEl</span> <span class="o">=</span> <span class="nx">getPrevRowFocusElement</span><span class="p">(</span><span class="nx">focusedEl</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">isSame</span><span class="p">(</span><span class="nx">focusEl</span><span class="p">,</span> <span class="nx">focusedEl</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">performFocus</span><span class="p">(</span><span class="nx">focusEl</span><span class="p">);</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="focustonextrowelement">
  <h3>
    <a href="#focustonextrowelement" name="focustonextrowelement" class="pilcrow">&#182;</a>
    <a name="focusToNextRowElement">focusToNextRowElement</a>
  </h3>
</div>


<p>Focus to the next row element from the current focused element.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">focusedEl
</span>
      <span class="dox_type">JQLite</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">focusToNextRowElement</span><span class="p">(</span><span class="nx">focusedEl</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">focusEl</span> <span class="o">=</span> <span class="nx">getNextRowFocusElement</span><span class="p">(</span><span class="nx">focusedEl</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">isSame</span><span class="p">(</span><span class="nx">focusEl</span><span class="p">,</span> <span class="nx">focusedEl</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">performFocus</span><span class="p">(</span><span class="nx">focusEl</span><span class="p">);</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="issame">
  <h3>
    <a href="#issame" name="issame" class="pilcrow">&#182;</a>
    <a name="isSame">isSame</a>
  </h3>
</div>


<p>Compare to JQLite/HTMLElements objects to see if they reference the same HTMLElement.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">el</span>
      <span class="dox_type">JQLite</span>
      <span class="dox_type">HTMLElement</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">el2</span>
      <span class="dox_type">JQLite</span>
      <span class="dox_type">HTMLElement</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">isSame</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">el2</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">el</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nx">el</span><span class="p">)</span> <span class="o">===</span> <span class="p">(</span><span class="nx">el2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nx">el2</span><span class="p">);</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="hasprevrowfocuselement">
  <h3>
    <a href="#hasprevrowfocuselement" name="hasprevrowfocuselement" class="pilcrow">&#182;</a>
    <a name="hasPrevRowFocusElement">hasPrevRowFocusElement</a>
  </h3>
</div>


<p>check to see if the previous row has the same selector which is derived from the focusedEl</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">focusedEl</span>
      <span class="dox_type">HTMLElement</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">hasPrevRowFocusElement</span><span class="p">(</span><span class="nx">focusedEl</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">getPrevRowFocusElement</span><span class="p">(</span><span class="nx">focusedEl</span><span class="p">);</span>
            <span class="k">return</span> <span class="o">!!</span><span class="p">(</span><span class="nx">el</span> <span class="o">&amp;&amp;</span> <span class="nx">el</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">el</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!==</span> <span class="nx">focusedEl</span><span class="p">);</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="hasnextrowfocuselement">
  <h3>
    <a href="#hasnextrowfocuselement" name="hasnextrowfocuselement" class="pilcrow">&#182;</a>
    <a name="hasNextRowFocusElement">hasNextRowFocusElement</a>
  </h3>
</div>


<p>check to see if the next row has the same selector which is derived from the focusedEl</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">focusedEl</span>
      <span class="dox_type">HTMLElement</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">hasNextRowFocusElement</span><span class="p">(</span><span class="nx">focusedEl</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">getNextRowFocusElement</span><span class="p">(</span><span class="nx">focusedEl</span><span class="p">);</span>
            <span class="k">return</span> <span class="o">!!</span><span class="p">(</span><span class="nx">el</span> <span class="o">&amp;&amp;</span> <span class="nx">el</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">el</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!==</span> <span class="nx">focusedEl</span><span class="p">);</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="getprevrowfocuselement">
  <h3>
    <a href="#getprevrowfocuselement" name="getprevrowfocuselement" class="pilcrow">&#182;</a>
    <a name="getPrevRowFocusElement">getPrevRowFocusElement</a>
  </h3>
</div>


<p>get the previous row and check for the focusedEl selector.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">focusedEl</span>
      <span class="dox_type">JQLite</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">getPrevRowFocusElement</span><span class="p">(</span><span class="nx">focusedEl</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">focusToRowElement</span><span class="p">(</span><span class="nx">focusedEl</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="getnextrowfocuselement">
  <h3>
    <a href="#getnextrowfocuselement" name="getnextrowfocuselement" class="pilcrow">&#182;</a>
    <a name="getNextRowFocusElement">getNextRowFocusElement</a>
  </h3>
</div>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">focusedEl</span>
      <span class="dox_type">JQLite</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">getNextRowFocusElement</span><span class="p">(</span><span class="nx">focusedEl</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">result</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;  FM: getNextRowFocusElement&quot;</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">focusToRowElement</span><span class="p">(</span><span class="nx">focusedEl</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="focustorowelement">
  <h3>
    <a href="#focustorowelement" name="focustorowelement" class="pilcrow">&#182;</a>
    <a name="focusToRowElment">focusToRowElement</a>
  </h3>
</div>


<p>Do the heavy lifting for focusing from one row to the next and pulling the selector.
Since it is the same going to previous or next it is all one method and just needs to know which direction
to increment.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">focusedEl</span>
      <span class="dox_type">JQLite</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">dir
</span>
      <span class="dox_type">Number</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">focusToRowElement</span><span class="p">(</span><span class="nx">focusedEl</span><span class="p">,</span> <span class="nx">dir</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-53" id="section-53">&#182;</a>
</div>
<p>dir should be 1 or -1</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">result</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;  focusToRowElement&quot;</span><span class="p">);</span>
            <span class="nx">focusedEl</span> <span class="o">=</span> <span class="nx">wrap</span><span class="p">(</span><span class="nx">focusedEl</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">inst</span><span class="p">.</span><span class="nx">element</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">contains</span><span class="p">(</span><span class="nx">focusedEl</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="p">{</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="kd">var</span> <span class="nx">resultEl</span><span class="p">,</span> <span class="nx">currentIndex</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">getRowIndexFromElement</span><span class="p">(</span><span class="nx">focusedEl</span><span class="p">),</span> <span class="nx">nextIndex</span> <span class="o">=</span> <span class="nx">currentIndex</span> <span class="o">+</span> <span class="nx">dir</span><span class="p">,</span> <span class="nx">selector</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">nextIndex</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">nextIndex</span> <span class="o">&gt;=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">rowsLength</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">focusedEl</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">selector</span> <span class="o">=</span> <span class="nx">getSelector</span><span class="p">(</span><span class="nx">focusedEl</span><span class="p">,</span> <span class="nx">currentIndex</span><span class="p">);</span>
            <span class="nx">result</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;  selector: %s&quot;</span><span class="p">,</span> <span class="nx">selector</span><span class="p">);</span>
            <span class="nx">resultEl</span> <span class="o">=</span> <span class="nx">findNextRowWithSelection</span><span class="p">(</span><span class="nx">nextIndex</span><span class="p">,</span> <span class="nx">dir</span><span class="p">,</span> <span class="nx">selector</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">resultEl</span> <span class="o">&amp;&amp;</span> <span class="nx">resultEl</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">resultEl</span> <span class="o">:</span> <span class="nx">focusedEl</span><span class="p">;</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="getselector">
  <h3>
    <a href="#getselector" name="getselector" class="pilcrow">&#182;</a>
    <a name="getSelector">getSelector</a>
  </h3>
</div>

  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">el</span>
      <span class="dox_type">HTMLElement</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">currentIndex</span>
      <span class="dox_type">Number=</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">getSelector</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">currentIndex</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">el</span> <span class="o">=</span> <span class="nx">el</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nx">el</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">currentIndex</span> <span class="o">=</span> <span class="nx">currentIndex</span> <span class="o">||</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">getRowIndexFromElement</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">rowEl</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">getRowElm</span><span class="p">(</span><span class="nx">currentIndex</span><span class="p">);</span>
                <span class="k">return</span> <span class="nx">ux</span><span class="p">.</span><span class="nx">selector</span><span class="p">.</span><span class="nx">quickSelector</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">rowEl</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">filterClasses</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="performfocus">
  <h3>
    <a href="#performfocus" name="performfocus" class="pilcrow">&#182;</a>
    <a name="performFocus">performFocus</a>
  </h3>
</div>


<p>Do the actual focus. Select the text if select exists.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">focusEl
</span>
      <span class="dox_type">JQLite</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">performFocus</span><span class="p">(</span><span class="nx">focusEl</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">result</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;  performFocus %o&quot;</span><span class="p">,</span> <span class="nx">focusEl</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
            <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-56" id="section-56">&#182;</a>
</div>
<p>we now need to scroll the row into view if it is not.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span><span class="nx">focusEl</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
                <span class="nx">inst</span><span class="p">.</span><span class="nx">scrollModel</span><span class="p">.</span><span class="nx">scrollIntoView</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">getRowIndexFromElement</span><span class="p">(</span><span class="nx">focusEl</span><span class="p">),</span> <span class="kc">true</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">focusEl</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">select</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">focusEl</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">select</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="nx">focusEl</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">focus</span><span class="p">();</span>
                <span class="nx">success</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">success</span><span class="p">;</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="findnextrowwithselection">
  <h3>
    <a href="#findnextrowwithselection" name="findnextrowwithselection" class="pilcrow">&#182;</a>
    <a name="findNextRowWithSelection">findNextRowWithSelection</a>
  </h3>
</div>


<p>Find the next row that has a matching selection. If one is not found it will no focus.
Since a creep render happens after every scroll it should not have difficulty finding a row.
However, possible bug here if a selector similar to this one doesn't exist for a large distance.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">nextIndex</span>
      <span class="dox_type">Number</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">dir</span>
      <span class="dox_type">Number</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">selector</span>
      <span class="dox_type">String</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span> <span class="nx">findNextRowWithSelection</span><span class="p">(</span><span class="nx">nextIndex</span><span class="p">,</span> <span class="nx">dir</span><span class="p">,</span> <span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">result</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;  findNextRowWithSelection&quot;</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">gridFocusManager</span> <span class="o">&amp;&amp;</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">gridFocusManager</span><span class="p">.</span><span class="nx">filterNextPattern</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-58" id="section-58">&#182;</a>
</div>
<p>make it look just through the objects to jump to that item.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="k">while</span> <span class="p">(</span><span class="nx">nextIndex</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">nextIndex</span> <span class="o">&lt;</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">rowsLength</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">exports</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">isMatch</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">nextIndex</span><span class="p">],</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">gridFocusManager</span><span class="p">.</span><span class="nx">filterNextPattern</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">nextIndex</span> <span class="o">+=</span> <span class="nx">dir</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="kd">var</span> <span class="nx">nextEl</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">getRowElm</span><span class="p">(</span><span class="nx">nextIndex</span><span class="p">),</span> <span class="nx">focusEl</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">nextEl</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">classList</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s2">&quot;uncompiled&quot;</span><span class="p">))</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-59" id="section-59">&#182;</a>
</div>
<p>we must remove the hidden value on the uncompiled or it will not pass visibility.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="nx">nextEl</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s2">&quot;uncompiled&quot;</span><span class="p">);</span>
                <span class="nx">focusEl</span> <span class="o">=</span> <span class="nx">query</span><span class="p">(</span><span class="nx">nextEl</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">selector</span><span class="p">);</span>
                <span class="nx">nextEl</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;uncompiled&quot;</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">focusEl</span> <span class="o">=</span> <span class="nx">query</span><span class="p">(</span><span class="nx">nextEl</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">selector</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">getContent</span><span class="p">();</span>
            <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nx">focusEl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">dir</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">nextIndex</span> <span class="o">&lt;</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">rowsLength</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">dir</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">nextIndex</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">nextIndex</span> <span class="o">+=</span> <span class="nx">dir</span><span class="p">;</span>
                <span class="nx">nextEl</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">getRowElm</span><span class="p">(</span><span class="nx">nextIndex</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">nextEl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nx">focusEl</span> <span class="o">=</span> <span class="nx">query</span><span class="p">(</span><span class="nx">nextEl</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">selector</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">focusEl</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="kd">function</span> <span class="nx">onResize</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">index</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">activeElement</span> <span class="o">!==</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">element</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">contains</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">activeElement</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">index</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">getRowIndexFromElement</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">activeElement</span><span class="p">);</span>
                <span class="nx">inst</span><span class="p">.</span><span class="nx">scrollModel</span><span class="p">.</span><span class="nx">scrollIntoView</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="kd">function</span> <span class="nx">throttleNextPrev</span><span class="p">(</span><span class="nx">method</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">gridFocusManager</span> <span class="o">&amp;&amp;</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">gridFocusManager</span><span class="p">.</span><span class="nx">throttleNextPrev</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">throttleIntv</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">throttleIntv</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                        <span class="nx">clearTimeout</span><span class="p">();</span>
                        <span class="nx">throttleIntv</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="p">},</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">gridFocusManager</span><span class="p">.</span><span class="nx">throttleNextPrev</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="nx">inst</span><span class="p">.</span><span class="nx">creepRenderModel</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
            <span class="nx">inst</span><span class="p">.</span><span class="nx">flow</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">method</span><span class="p">,</span> <span class="p">[</span> <span class="nb">document</span><span class="p">.</span><span class="nx">activeElement</span> <span class="p">],</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="kd">function</span> <span class="nx">focusToPrevElementOfSame</span><span class="p">(</span><span class="nx">evt</span><span class="p">,</span> <span class="nx">checkFn</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">element</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">contains</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">activeElement</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">throttleNextPrev</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">activeElement</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">found</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">checkFn</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">focusToSiblingRowBackupPlan</span><span class="p">(</span><span class="nx">activeElement</span><span class="p">,</span> <span class="nx">checkFn</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
                        <span class="nx">found</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">found</span> <span class="o">=</span> <span class="nx">focusToSiblingRowBackupPlan</span><span class="p">(</span><span class="nx">activeElement</span><span class="p">,</span> <span class="nx">checkFn</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">found</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">inst</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">FOCUS_TO_PREV_ELEMENT_OF_SAME_FAILURE</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">});</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="kd">function</span> <span class="nx">focusToNextElementOfSame</span><span class="p">(</span><span class="nx">evt</span><span class="p">,</span> <span class="nx">checkFn</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">element</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">contains</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">activeElement</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">throttleNextPrev</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">activeElement</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">found</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">checkFn</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">focusToSiblingRowBackupPlan</span><span class="p">(</span><span class="nx">activeElement</span><span class="p">,</span> <span class="nx">checkFn</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                        <span class="nx">found</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">found</span> <span class="o">=</span> <span class="nx">focusToNextRowElement</span><span class="p">(</span><span class="nx">activeElement</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">found</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">inst</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">FOCUS_TO_NEXT_ELEMENT_OF_SAME_FAILURE</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">});</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="kd">function</span> <span class="nx">focusToSiblingRowBackupPlan</span><span class="p">(</span><span class="nx">activeElement</span><span class="p">,</span> <span class="nx">checkFn</span><span class="p">,</span> <span class="nx">delta</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-60" id="section-60">&#182;</a>
</div>
<p>if it failed. Then use the checkFn to look further if it exists.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="kd">var</span> <span class="nx">toIndex</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">getRowIndexFromElement</span><span class="p">(</span><span class="nx">activeElement</span><span class="p">)</span> <span class="o">+</span> <span class="nx">delta</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">list</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">getData</span><span class="p">();</span>
            <span class="kd">var</span> <span class="nx">selector</span> <span class="o">=</span> <span class="nx">getSelector</span><span class="p">(</span><span class="nx">activeElement</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">focusToIndex</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">unwatch</span><span class="p">;</span>
            <span class="kd">function</span> <span class="nx">onAfterRender</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">unwatch</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">row</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">getRowElm</span><span class="p">(</span><span class="nx">focusToIndex</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">fel</span> <span class="o">=</span> <span class="nx">query</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">selector</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">fel</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">performFocus</span><span class="p">(</span><span class="nx">fel</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">delta</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">inst</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">FOCUS_TO_PREV_ELEMENT_OF_SAME_FAILURE</span><span class="p">);</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">inst</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">FOCUS_TO_NEXT_ELEMENT_OF_SAME_FAILURE</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="kd">function</span> <span class="nx">check</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">checkFn</span><span class="p">(</span><span class="nx">list</span><span class="p">[</span><span class="nx">i</span><span class="p">]))</span> <span class="p">{</span>
                    <span class="nx">focusToIndex</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
                    <span class="nx">unwatch</span> <span class="o">=</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">$on</span><span class="p">(</span><span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">ON_AFTER_RENDER</span><span class="p">,</span> <span class="nx">onAfterRender</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">inst</span><span class="p">.</span><span class="nx">scrollModel</span><span class="p">.</span><span class="nx">scrollIntoView</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="kc">true</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">onAfterRender</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">delta</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">toIndex</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">check</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">toIndex</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">inst</span><span class="p">.</span><span class="nx">rowsLength</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">check</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-61" id="section-61">&#182;</a>
</div>
<p>it has to match a pattern for each row. These are too unique.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">ux</span><span class="p">.</span><span class="nx">selector</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">allowId</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">ux</span><span class="p">.</span><span class="nx">selector</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">allowAttributes</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">ux</span><span class="p">.</span><span class="nx">selector</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">addVisible</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">result</span><span class="p">.</span><span class="nx">hasPrevRowFocusElement</span> <span class="o">=</span> <span class="nx">hasPrevRowFocusElement</span><span class="p">;</span>
        <span class="nx">result</span><span class="p">.</span><span class="nx">hasNextRowFocusElement</span> <span class="o">=</span> <span class="nx">hasNextRowFocusElement</span><span class="p">;</span>
        <span class="nx">result</span><span class="p">.</span><span class="nx">focusToPrevRowElement</span> <span class="o">=</span> <span class="nx">focusToPrevRowElement</span><span class="p">;</span>
        <span class="nx">result</span><span class="p">.</span><span class="nx">focusToNextRowElement</span> <span class="o">=</span> <span class="nx">focusToNextRowElement</span><span class="p">;</span>
        <span class="nx">result</span><span class="p">.</span><span class="nx">query</span> <span class="o">=</span> <span class="nx">query</span><span class="p">;</span>
        <span class="nx">result</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">destroy</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">while</span> <span class="p">(</span><span class="nx">unwatchers</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">unwatchers</span><span class="p">.</span><span class="nx">pop</span><span class="p">()();</span>
            <span class="p">}</span>
            <span class="nx">unwatchers</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="nx">result</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">};</span>
        <span class="nx">unwatchers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">$on</span><span class="p">(</span><span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">ON_BEFORE_RESET</span><span class="p">,</span> <span class="nx">removeListeners</span><span class="p">));</span>
        <span class="nx">unwatchers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">$on</span><span class="p">(</span><span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">ON_BEFORE_RENDER</span><span class="p">,</span> <span class="nx">removeListeners</span><span class="p">));</span>
        <span class="nx">unwatchers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">$on</span><span class="p">(</span><span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">ON_AFTER_RENDER</span><span class="p">,</span> <span class="nx">addListeners</span><span class="p">));</span>
        <span class="nx">unwatchers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">$on</span><span class="p">(</span><span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">FOCUS_TO_PREV_ELEMENT_OF_SAME</span><span class="p">,</span> <span class="nx">focusToPrevElementOfSame</span><span class="p">));</span>
        <span class="nx">unwatchers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">$on</span><span class="p">(</span><span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">FOCUS_TO_NEXT_ELEMENT_OF_SAME</span><span class="p">,</span> <span class="nx">focusToNextElementOfSame</span><span class="p">));</span>
        <span class="nx">unwatchers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">inst</span><span class="p">.</span><span class="nx">scope</span><span class="p">.</span><span class="nx">$on</span><span class="p">(</span><span class="nx">exports</span><span class="p">.</span><span class="nx">datagrid</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">ON_AFTER_HEIGHTS_UPDATED_RENDER</span><span class="p">,</span> <span class="nx">onResize</span><span class="p">));</span>
        <span class="nx">inst</span><span class="p">.</span><span class="nx">gridFocusManager</span> <span class="o">=</span> <span class="nx">result</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">inst</span><span class="p">;</span>
    <span class="p">}</span> <span class="p">];</span>
<span class="p">});</span>
<span class="p">}(</span><span class="k">this</span><span class="p">.</span><span class="nx">ux</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">ux</span> <span class="o">||</span> <span class="p">{},</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="k">return</span> <span class="k">this</span><span class="p">;}()));</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
